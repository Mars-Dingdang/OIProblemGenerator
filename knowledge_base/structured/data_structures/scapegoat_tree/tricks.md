- **重构时机控制**：插入时通过判断深度是否超过 \(\lfloor \log_{1/\alpha} |T| \rfloor\) 来决定是否触发失衡检查，避免频繁重构。
- **替罪羊节点选择**：回溯过程中第一个满足 \( \max(|T_{\text{left}}|, |T_{\text{right}}|) > \alpha \cdot |T_x| \) 的节点即为“替罪羊”，仅重构该子树即可恢复整体平衡。
- **懒删除与全局重构**：删除操作仅标记计数，当有效节点占比低于 \(\alpha\) 时对整棵树重构，保证空间利用率和访问效率。
- **势能分析保障均摊复杂度**：每次插入在路径上积累 \(O(1)\) 势能，用于支付未来重构成本，确保均摊 \(O(\log n)\) 时间复杂度。
- **避免浮点精度问题**：实际实现中可用乘法代替对数比较（如将 `dep > log(tot[rt]+1)/log(1/ALPHA)` 改为指数形式判断），提升效率与稳定性。
- **二分建树保持平衡**：重构时中序遍历得到有序序列，取中点建根递归建树，保证新子树完全平衡。
- **双计数机制**：`tot[x]` 统计占用节点数（含已删），`sz[x]` 统计有效值数量，配合 `cnt[x]` 实现可重集语义。