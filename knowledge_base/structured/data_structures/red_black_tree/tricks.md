- **旋转复用**：使用 `bool dir` 参数统一左右旋逻辑，减少代码重复。
- **双红修复**：插入后仅需处理连续红节点（违反性质3），通过染色和旋转恢复平衡。
- **删除补黑**：删除黑节点会破坏黑高，通过兄弟节点状态分4种情况调整，本质是向兄弟借黑或传递双重黑。
- **虚拟NIL简化**：实际实现中不显式创建NIL节点，用空指针代替，并默认其为黑色。
- **根节点染黑**：每次插入/删除后确保根为黑色，不影响复杂度且满足多数定义要求。
- **与2-3-4树对应**：红边等价于2-3-4树中的多元素节点，红黑树操作可视为2-3-4树分裂/合并的二叉形式。
- **子树大小维护**：在旋转和插入/删除时同步更新 `sz` 字段，支持O(log n)排名查询。
- **迭代器稳定性**：`erase()` 返回指向下一个节点的指针，便于安全遍历删除。