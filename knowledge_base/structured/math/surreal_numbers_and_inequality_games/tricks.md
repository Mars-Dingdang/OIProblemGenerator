# 浅谈超现实数与不平等博弈

**Author:** 马耀华

## 关键思想与技巧

### 超现实数的递归构造
- **定义核心**：超现实数由 `x = {L | R}` 形式递归构造，其中 L 和 R 是已存在的数集，且满足 `∀l ∈ L, r ∈ R: l < r`。
- **大小比较**：使用递归定义 `x ≥ y` 当且仅当不存在 `x^R ≤ y` 且不存在 `x ≤ y^L`，这是判断博弈胜负的基础。
- **简单性法则**：若存在一个数 z 满足 `x^L < z < x^R`，则最简单的那个 z（即在二叉树中层数最低）就是 `{x^L | x^R}` 的值。例如 `{1.25 | 2} = 1.5`。

### 博弈的组合语义
- **双人零和博弈建模**：每个博弈状态是一个形式 `{GL | GR}`，左玩家走一步到 GL，右玩家走一步到 GR。
- **四种结果分类**：
  - `G > 0`: 左方必胜（先手或后手均可赢）
  - `G < 0`: 右方必胜
  - `G = 0`: 后手必胜
  - `G || 0`: 先手必胜（模糊博弈）
- 等价于：`G > 0 ⇔ G + (-H)` 左方必胜当且仅当 `G > H`。

### 公平博弈与SG定理
- **公平博弈**：左右行动集合相同，此时 `G = -G`，且 `G = 0` 或 `G || 0`。
- **Nimber (∗n)**：单堆Nim游戏的状态值，`∗n = {∗0, ∗1, ..., ∗(n−1) | ∗0, ∗1, ..., ∗(n−1)}`。
- **SG函数**：对任意公平博弈 G，其值为 `∗^{mex(SG值后继)}`。
- **Sprague-Grundy 定理**：多个公平博弈的和等于它们 SG 值的异或：`G + H = ∗^{g(G) ⊕ g(H)}`。

### 热博弈与平移原理
- **平移原理**：若 G 不是数，x 是数，则 `G + x = {GL + x | GR + x}`。这说明玩家优先在非数博弈中操作。
- **转换 (Switch)**：形如 `{x|y}`（x ≥ y）的博弈称为转换，其值可表示为 `u ± v`，其中 `u = (x+y)/2`, `v = (x−y)/2`，v 称为热度。
- **多转换博弈策略**：双方会按热度降序依次选择行动，最大热度者决定优先权。

### 停止值与模糊区间
- **左/右停止值 L(G), R(G)**：表示从 G 出发，双方轮流最优操作直到变为数值时的结果估计。
  - 若 `L(G) < R(G)`，则 G 的值是满足该区间的最简单数。
  - 若 `L(G) ≥ R(G)`，则 G 的值不是数，其**模糊区间**为 `(R(G), L(G))`，所有在此范围内的数 x 都满足 `x || G`。
- **判定技巧**：直接计算 `L(G)` 和 `R(G)` 可快速判断 G 是否为数以及其近似行为。

### 平均值与冷却技术
- **冷却 t 度**：定义 `G_t = { (GL)_t − t | (GR)_t + t }`，随着 t 增加，G_t 逐渐趋近于某个数。
- **平均值 m(G)**：最小的 t0 使得 `G_{t0}` 收敛到某数 x，则 `m(G) = x`，`t(G) = t0`。
- **热图法**：绘制 `L(G_t)` 和 `R(G_t)` 随 t 变化的图像，交点横坐标为 `m(G)`，纵坐标为 `t(G)`。
- **线性近似**：对于 k 个相同博弈之和 `kG`，有 `k·m(G) − t(G) < kG < k·m(G) + t(G)`，可用于估算大数量下的博弈值。

### 全部小博弈与原子量
- **全部小博弈**：每个后继状态要么双方都能动，要么都不能动。典型例子：`∗n`, `↑`, `↓`, `n↑ + ∗`。
- **性质**：对任意实数 x > 0，有 `−x < G < x`，即“绝对值极小”。
- **顺序和 G:H**：对 G 的操作使 H 消失；对 H 的操作不影响 G。用于建模层级结构（如花形Hackenbush）。
- **原子量 G′′**：递归定义 `G′′ = {GL′′ − 2 | GR′′ + 2}`，但需根据是否大于远星 $ 进行修正。
  - 若 `G > $`，则 G′′ 是 `<|| GR′′+2` 的最大整数
  - 若 `G < $`，则 G′′ 是 `||> GL′′−2` 的最大整数
- **原子量用途**：判断博弈相对于远星 $ 的强弱关系，进而推断整体胜负趋势。例如总原子量 > 0 表示左方优势明显。

### 实际应用技巧
- **博弈化简三法则**：
  1. **优超**：若 B ≤ A，则可以从左选项中删除 B。
  2. **逆转**：若某左选项 A 满足 `A^R ≤ G`，则可用 `A^{RL}` 替代 A。
  3. **礼品马原理**：可以添加任何满足 `H <|| G` 的 H 到右选项而不改变值。
- **Hackenbush 示例**：
  - n条蓝边链：值为 n
  - n条红边链：值为 −n
  - 蓝-红链：`{0|1} = 1/2`
  - 绿边：`∗ = {0|0}`
  - ↑ = {0|∗}, ↓ = {∗|0}
- **例题处理模式**：将复杂博弈分解为数字部分、Nimber部分、无穷小部分（↑, ↓），分别统计再合并分析。