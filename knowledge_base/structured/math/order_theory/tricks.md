## 关键观察与技巧

### 1. **偏序集与DAG**
- 偏序集的可视化：Hasse图是有向无环图（DAG）。
- 利用拓扑排序可将有限偏序集转化为全序。

### 2. **Dilworth定理**
- **核心**：最小链覆盖数 = 最长反链长度。
- **应用**：
  - 导弹拦截问题：不上升子序列的最少覆盖数 = 最长上升子序列长度。
  - 网格图最大点权独立集：转化为DAG最小链覆盖。
- **证明思路**：数学归纳法，构造集合 $S^+$ 和 $S^-$。

### 3. **Mirsky定理**
- **对偶**：最小反链覆盖数 = 最长链长度。
- **构造**：利用水平集 $f^{-1}(\{i\})$ 划分反链。

### 4. **严格弱序（Strict Weak Order）**
- C++ STL比较器要求：自反性、反对称性、传递性、不可比传递性。
- 自定义比较器 `<` 可推导出 $>$, $\le$, $\ge$, $=$。

### 5. **Erdős–Szekeres定理**
- 序列长度 $\ge rs+1$ 则存在长度 $r+1$ 的不降子序列或长度 $s+1$ 的不升子序列。
- 证明：利用Dilworth定理，定义偏序 $(i, a_i) \preceq (j, a_j) \iff (i \le j \land a_i \le a_j)$。

### 6. **Zorn引理**
- 非空偏序集的每条链都有上界 $\implies$ 存在极大元。
- 与选择公理、良序定理等价。

### 7. **格（Lattice）**
- 并半格：任意两元素有上确界（并 $a \lor b$）。
- 交半格：任意两元素有下确界（交 $a \land b$）。
- 例子：正整数集合按整除关系构成格，lcm为并，gcd为交。

### 8. **Hasse图构造**
- 顶点：偏序集元素。
- 边：$x \prec y$ 且不存在 $z$ 使得 $x \prec z \prec y$。
- 用于可视化有限偏序集。

### 9. **C++实践技巧**
- 使用 `upper_bound` 维护不上升子序列（导弹拦截）。
- 使用 `lower_bound` 维护上升子序列。
- 网格DP求最大点权独立集：$f(i,j) = \max\{f(i-1,j), f(i,j+1), f(i-1,j+1)+a_{ij}\}$。