# 对信息学比赛中选手分数数据的分析

**Author:** 邱天异

## 关键思想与技巧

### 1. **理想比赛模型 (Ideal Competition Model)**
- 定义了一个连续化的‘理想比赛’，用联合概率密度函数 $H_A(x, \delta)$ 描述：
  - $x \in [0,1]$: 选手的真实水平（期望得分 / 最高分）。
  - $\delta \in \mathbb{R}$: 实际表现相对于真实水平的偏移量（得分波动）。
- 引入**分数分布函数** $C_A(s)$，表示最终得分为 $s$ 的选手比例，它是 $H_A$ 在 $x$ 上的积分：
  $$
  C_A(s) = \int_0^1 H_A(x, s - x) dx
  $$

### 2. **简单理想比赛假设 (Simplified Model)**
- 假设选手的真实水平 $X_B$ 与其得分波动 $\Delta_B$ 相互独立。
- 此时联合分布可分解为：
  $$
  H_A(x, \delta) = X_A(x) \cdot \Delta_A(\delta)
  $$
  其中 $X_A(x)$ 是期望值分布，$\Delta_A(\delta)$ 是偏移量分布。
- 这使得可以从观测到的总分分布 $C_A$ 反推出真实水平分布 $X_A$。

### 3. **缩放等价性 (Scaling Equivalence)**
- 不同比赛因题目难度、分值设置不同，其分数尺度也不同。
- 提出‘缩放等价’概念：若两场比赛可通过线性变换 $f(x) = \alpha x + \beta$ ($\alpha > 0$) 将分数对齐，则它们在统计上本质相同。
- 利用标准差进行归一化，使来自不同年份/场次的数据可以合并分析。

### 4. **偏移量分布的测量（正态性）**
- 使用北大集训多场考试数据，计算每位选手各场实际分与平均分（估计期望分）的差值。
- 对这些差值进行标准化处理后，通过直方图拟合和 Q-Q 图验证，发现其高度符合**均值为0的正态分布**（定理3.2）。
- **关键技巧**：使用最大似然估计从被筛选过的数据（仅晋级者）中估算完整分布的标准差，避免了选择偏差的影响。

### 5. **整体水平分布的反演（对数分布）**
- 分析NOIP/CSP复赛数据，发现分数分布 $C_A(s)$ 在 $[0.2, 1]$ 区间内极好地拟合于负对数函数 $-\log(s)$。
- 推测此分布在整个 $[0,1]$ 区间成立，并通过总人数估算验证了假设的合理性（命题4.1）。

### 6. **消除初赛筛选偏差**
- 初赛会淘汰低分选手，导致复赛数据不能反映全体选手的真实水平分布。
- 利用初复赛分数的线性关系假设和已知的偏移量正态分布，计算出‘初赛分数线’映射到复赛分数后的等效值 $h$。
- 使用贝叶斯思想的近似（先验概率），修正分数分布：
  $$
  C_{A'}(s) \propto \frac{-\log(s)}{1 - R(\sqrt{2}\sigma_F, h - s)}
  $$
  其中分母项 $1 - R(\sqrt{2}\sigma_F, h - s)$ 表示一名复赛得分为 $s$ 的选手能通过初赛的概率，用于补偿被过滤掉的人群。

### 7. **从 $C_A$ 反推 $X_A$**
- 已知 $C_{A'}(s)$ 和 $\Delta_A(\delta)$（正态分布），目标是求解 $X_{A'}(x)$。
- 根据命题2.10，这是一个卷积方程：
  $$
  C_{A'}(s) = \int_0^1 X_{A'}(x) \cdot \Delta_A(s - x) dx
  $$
- 由于无法解析求解，采用**离散化+二次规划**的方法：
  - 将 $[0,1]$ 离散为500个点。
  - 将积分方程转化为线性方程组的最小二乘问题（最小化残差平方和）。
  - 加入平滑性约束以避免震荡解。
- 最终数值求解得到全国选手真实水平的分布 $X_{A'}(x)$。