## 核心定理
- **Sprague‑Grundy 定理**：任何正常公平组合游戏等价于单堆 Nim 游戏，即存在 SG 函数。
- **SG 函数计算**：SG(x) = mex{SG(x') | x' 是 x 的后继}。终止状态 SG=0。
- **游戏和**：多个独立子游戏组合时，总 SG = 各子游戏 SG 的异或（Nim 和）。
- **必胜判定**：状态 x 先手必胜 ⇔ SG(x) ≠ 0。

## 常见游戏结论
1. **Nim 游戏**：先手必胜 ⇔ 各堆石子数异或和非零。
2. **Bachet 游戏**（一堆，每次取 1..k）：先手必胜 ⇔ n % (k+1) ≠ 0。
3. **Moore's Nim‑k**：统计每位 1 的个数，若所有位计数 mod (k+1) 均为 0 则先手必败。
4. **阶梯 Nim**：只考虑奇数堆（1‑based 索引）的异或和，非零则先手必胜。
5. **Fibonacci Nim**：先手必败 ⇔ 石子数 n 是 Fibonacci 数。
6. **Wythoff 游戏**（两堆）：设 a ≤ b，先手必败 ⇔ a = ⌊(b‑a)·φ⌋，φ = (√5+1)/2。

## 技巧与优化
- **打表找规律**：SG 函数通常有周期性或简单公式，可暴力小数据后猜测。
- **对称策略**：在游戏和（如 Nim）中，后手可模仿先手操作对称的子游戏，迫使先手败。
- **分解为子游戏**：若游戏由独立部分组成，分别计算 SG 再异或。
- **反常规则（misère）**：最后行动者输。对于 Nim，仅当所有堆均为 1 时规则不同：异或和为 1 先手必败，否则同正常规则。
- **翻硬币游戏**：局面 SG = 所有正面朝上硬币对应基础局面 SG 的异或。基础局面 SG 可递推计算。
- **Nim 数运算**：Nim 和即异或；Nim 积较复杂，但前 2^(2^n) 个数构成有限域，可用于某些组合游戏分析。

## 问题转化
- 将非标准游戏建模为公平组合游戏：定义状态、合法操作、终止状态。
- 利用 SG 函数将游戏转化为 Nim 堆，用异或判断。
- 若游戏有“每次操作影响多个子部分”的特性（如翻硬币），考虑其 SG 是否等于各正面位置 SG 的异或。