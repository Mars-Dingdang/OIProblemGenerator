- **缩环处理**：在朱刘算法中，每轮选择每个点的最小入边，若形成环则将环收缩为超级节点，并调整其他边的权重（减去环上节点的入边权）。
- **权值偏移**：使用 `in[v]` 记录当前最小入边权值，在缩环后通过 `e[i].w -= in[v]` 实现势能函数优化，保证总权值正确累加。
- **Tarjan 算法优化**：利用左偏树合并堆维护每个点的最小入边，结合并查集管理超级节点，实现 $O(m + n \log n)$ 复杂度。
- **强连通假设**：Tarjan 算法要求图强连通，否则需添加无穷大权边连接不连通部分，避免影响结果。
- **两阶段设计**：先 `contract` 构建收缩树，再 `expand` 回溯展开环，恢复原始节点路径并累加真实边权（`w0`）。
- **常数延迟更新**：左偏树中使用 `constant` 延迟更新节点权值，避免重复修改，提升合并效率。
- **环检测技巧**：通过 `vis` 数组标记遍历路径，当回溯到已访问节点时判定成环，进而执行缩环操作。